:root{
  --bg-1:#061223; --bg-2:#0b0f1a;
  --panel: rgba(10,12,18,0.72);
  --glass: rgba(255,255,255,0.05);
  --accent: #7be7ff;
  --radius:14px;
  --font: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:var(--font);-webkit-font-smoothing:antialiased;background:linear-gradient(180deg,var(--bg-1),var(--bg-2));color:#eef7ff}

/* Nebula background */
#nebula{position:fixed;inset:0;z-index:0;pointer-events:none;
  background:
    radial-gradient(closest-side at 12% 28%, rgba(198,108,255,0.08), transparent 18%),
    radial-gradient(closest-side at 84% 72%, rgba(0,226,163,0.06), transparent 18%),
    radial-gradient(closest-side at 50% 56%, rgba(123,231,255,0.05), transparent 25%);
  filter: blur(36px) saturate(1.06);
  animation: nebMove 28s linear infinite alternate;
}
@keyframes nebMove { from{transform:translateY(0) scale(1)} to{transform:translateY(-26px) scale(1.02)} }

/* topbar */
#topbar{position:fixed;left:14px;top:14px;z-index:30;display:flex;gap:10px;align-items:flex-start}
.uiBtn{background:var(--panel);border:1px solid rgba(255,255,255,0.04);padding:8px 10px;border-radius:10px;color:#eaf7ff;cursor:pointer}
.panel{margin-top:8px;background:var(--panel);padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);width:300px}
.hidden{display:none}
.topList{margin-top:8px;max-height:40vh;overflow:auto}
.topList .row{display:flex;justify-content:space-between;padding:8px 6px;border-bottom:1px solid rgba(255,255,255,0.02);font-size:14px}

/* stage / bubbles */
#stage{position:fixed;inset:0;z-index:6;pointer-events:none;}

/* bubble */
.bubble{
  position:absolute;
  pointer-events:auto;
  width:120px;height:120px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  color:#fff;font-weight:700;text-align:center;
  transition: transform .22s ease, box-shadow .22s ease, left 0.2s linear, top 0.2s linear;
  cursor:pointer;user-select:none;backdrop-filter: blur(4px);
  box-shadow: 0 18px 40px rgba(0,0,0,0.45);
  z-index: 12;
}

/* inner glass highlight + label */
.bubble .glass{position:absolute;inset:12%;border-radius:50%;pointer-events:none;background:radial-gradient(circle at 30% 25%, rgba(255,255,255,0.86), rgba(255,255,255,0.06) 28%, transparent 60%);mix-blend-mode:screen}
.bubble .label{position:relative;z-index:2;font-size:13px;text-shadow:0 6px 14px rgba(0,0,0,0.6)}

/* orbiting wisps */
.bubble::before, .bubble::after{
  content:"";position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);border-radius:50%;pointer-events:none;mix-blend-mode:screen;
}
.bubble::before{width:220px;height:220px;filter:blur(16px);opacity:0.18;animation:spin 18s linear infinite}
.bubble::after{width:320px;height:320px;filter:blur(34px);opacity:0.08;animation:spinRev 28s linear infinite}
@keyframes spin{from{transform:translate(-50%,-50%) rotate(0deg)}to{transform:translate(-50%,-50%) rotate(360deg)}}
@keyframes spinRev{from{transform:translate(-50%,-50%) rotate(360deg)}to{transform:translate(-50%,-50%) rotate(0deg)}}

.bubble:active,.bubble:hover{transform:scale(1.06);box-shadow:0 28px 80px rgba(0,0,0,0.6)}

/* genre colors (iridescent) */
.bubble[data-genre="techno"]{ background: radial-gradient(circle at 30% 30%, rgba(255,38,125,0.92), rgba(255,38,125,0.18)); color:#fff; }
.bubble[data-genre="house"] { background: radial-gradient(circle at 30% 30%, rgba(255,143,51,0.92), rgba(255,143,51,0.18)); }
.bubble[data-genre="dnb"]   { background: radial-gradient(circle at 30% 30%, rgba(255,206,0,0.92), rgba(255,206,0,0.18)); color:#081220; }
.bubble[data-genre="dub"]   { background: radial-gradient(circle at 30% 30%, rgba(0,210,130,0.92), rgba(0,210,130,0.18)); }
.bubble[data-genre="elect"] { background: radial-gradient(circle at 30% 30%, rgba(35,120,255,0.92), rgba(35,120,255,0.18)); }
.bubble[data-genre="main"]  { background: radial-gradient(circle at 30% 30%, rgba(170,90,255,0.92), rgba(170,90,255,0.18)); }

/* anchored prompt (in DOM; created/controlled by JS) */
.prompt {
  position:absolute; z-index:20; pointer-events:auto;
  width:min(380px,86vw); background: rgba(6,8,15,0.95); padding:12px; border-radius:12px; color:#eaf7ff; border:1px solid rgba(255,255,255,0.04);
  box-shadow: 0 18px 50px rgba(0,0,0,0.6);
  transform-origin:center;
}
.prompt .closeX{position:absolute;right:10px;top:8px;background:transparent;border:none;color:#dfefff;font-size:18px;cursor:pointer}
.prompt h3{margin:0 0 6px 0}
.prompt p.muted{margin:0 0 10px;color:#9fb7d6;font-size:14px}
.prompt input, .prompt textarea{width:100%;padding:10px;border-radius:10px;border:none;margin-top:8px;background:rgba(255,255,255,0.03);color:#fff;font-size:15px}
.prompt .actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
.btnLight{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 12px;border-radius:8px;color:#eaf7ff}
.btnPrimary{background:#19b56a;border:none;padding:8px 12px;border-radius:8px;color:white;cursor:pointer}

/* accessibility + small screens */
.sr{position:absolute!important;clip:rect(1px,1px,1px,1px);padding:0;border:0;height:1px;width:1px;overflow:hidden}
@media (max-width:600px){
  .bubble{width:92px;height:92px}
  .prompt{width:92vw}
  .panel{width:92vw}
}
